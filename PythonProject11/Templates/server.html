<!DOCTYPE html>
<html>
<head>
    <title>Vexa - {{ server['name'] }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="app-container">
        <div class="sidebar">
            <h1>Vexa</h1>
            <div class="user-info">
                {{ session['username'] }}
                <a href="{{ url_for('logout') }}">Ã‡Ä±kÄ±ÅŸ Yap</a>
            </div>

            <div class="server-info">
                <h2>{{ server['name'] }}</h2>
                <p>Sunucu Sahibi: {{ server['owner'] }}</p>
            </div>

            <div class="channel-list">
                <h3>Kanallar</h3>
                <ul>
                    {% for channel in channels %}
                    <li class="{% if channel['type'] == 'voice' %}voice-channel{% else %}text-channel{% endif %}">
                        <a href="{{ url_for('channel', server_id=server['id'], channel_id=channel['id']) }}">
                            {% if channel['type'] == 'voice' %}ðŸ”Š{% else %}#{% endif %}
                            {{ channel['name'] }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>

                <!-- Sadece yetkililere gÃ¶sterilecek kanal oluÅŸturma formu -->
                {% if is_owner_or_admin %}
                <form method="POST" action="{{ url_for('create_channel', server_id=server['id']) }}">
                    <input type="text" name="channel_name" placeholder="Kanal AdÄ±" required>
                    <select name="channel_type">
                        <option value="text">Metin KanalÄ±</option>
                        <option value="voice">Ses KanalÄ±</option>
                    </select>
                    <button type="submit">Kanal OluÅŸtur</button>
                </form>
                {% endif %}
            </div>

            <div class="member-list">
                <h3>Ãœyeler</h3>
                <ul>
                    {% for member in members %}
                    <li>
                        <span class="username">{{ member.username }}</span>
                        <span class="rank-badge">{{ member.rank }}</span>
                    </li>
                    {% endfor %}
                </ul>

                <!-- Sunucu sahibine Ã¶zel yÃ¶netim paneli -->
                {% if server.owner_id == session['user_id'] %}
                <div class="admin-panel">
                    <h4>YÃ¶netim Paneli</h4>
                    <form method="POST" action="{{ url_for('add_member', server_id=server['id']) }}">
                        <input type="text" name="username" placeholder="KullanÄ±cÄ± adÄ±" required>
                        <button type="submit">Ãœye Ekle</button>
                    </form>

                    <form method="POST" action="{{ url_for('set_rank', server_id=server['id']) }}">
                        <select name="user_id">
                            {% for member in members %}
                            {% if member.user_id != server.owner_id %}
                            <option value="{{ member.user_id }}">{{ member.username }}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                        <select name="rank">
                            <option value="admin">Admin</option>
                            <option value="mod">ModeratÃ¶r</option>
                            <option value="member">Ãœye</option>
                        </select>
                        <button type="submit">Rank Ata</button>
                    </form>
                </div>
                {% endif %}
            </div>
        </div>

        <div class="main-content">
            <div class="welcome-message">
                <h2>Bir kanal seÃ§in</h2>
                <p>{{ server['name'] }} sunucusundaki kanallardan birini seÃ§in</p>
            </div>
        </div>
    </div>
</body>
</html>